DDL 활용
1.DDL 대상
데이터들 정의하는 언어로서 (데이터를 담는 그릇을 정의하는 언어) 이러한그릇을 DBMS에서는 오브젝트라고 한다.

DDL대상 ㅣ                설명                                    ㅣ 비고
 
스키마 -DBMS 특성과 구현 환경을 감안한 데이터 구조                  -DBMS마다 차이   
       -직관적으로 하나의 데이터 베이스로 이해가능    

도메인 - 속성의 데이터 타입과 크기 ,제약조건등을 지정한 정보        -예를들어 주소를 VARCHAR(120)로 정의
       - 속성이 가질수 있는 값의 범위로 이해가능      

테이블 - 데이터 저장공간 

뷰 -하나이상의 물리 테이블에서 유도되는 가상의 논리 테이블

인덱스 - 검색을 빠르게 하기 위한 데이터 구조 

2.DDL조작 방법

구분     ㅣ      DDL명령       ㅣ      내용

생성        CREATE                 데이터베이스 오브젝트 생성

변경        ALTER                  데이터베이스 오브젝트 변경

삭제       DROP/TRUNCATE           데이터베이스 오브젝트 삭제/데이터베이스 오브젝트 내용 삭제

DDL 명령어로 분류되지는 않지만 DDL과 같이 사용되는 명령어가 있다. 
MYSQL의경우 오브젝트목록조회 SHOW  내용은 SELECT 
ORACLE의경우 SELECT로 목록과 내용을 조회한다.

2-1.DDL활용

테이블생성 

구분        ㅣ   문법

신규생성       CREATE TABLE 테이블명(
               열이름 데이터 타입[DEFAULT 값][NOT NULL]
               {,열이름 데이터 타입[DEFAULT 값][NOT NULL]}*
               {[FOREIGN KEY(열 리스트) REFERENCES 테이블 이름 [(열이름)]
               [ON DELETE옵션]
               [ON UPDATE 옵션] ] , }*
               [CHECK (조건식)ㅣUNIQUE(열이름)]);

다른테이블           
정보를 이용한  CREATE TABLE 테이블명 AS SELECT 문;
테이블 생성


2-2 테이블 변경 
 
     구분       ㅣ                             문법

     열추가                  ALTER TABLE 테이블명 ADD 열이름 테이터 타입[DEFAULT 값]

열데이터타입변경             ALTER TABLE 테이블명
                             MODIFY 열이름 데이터 타입 [DEFAULT 값]

      열삭제                ALTER TABLE 테이블 이름 DROP 열이름



2-3 테이블 삭제,절단,이름변경
        
             구분       ㅣ                             문법
 
          테이블 삭제       DROP TABLE 테이블 명

         테이블내용삭제     TRUNCATE TABLE 테이블 명

         테이블이름변경    RENAME TABLE 이전 테이블이름 TO 새로운 테이블 이름
                           ALTER TABLE 이전테이블 이름 RENAME 새로운 테이블 이름


3.제약조건 적용

      제약조건   ㅣ                              설명

PRIMARY KEY           테이블의 기본키를 정의 기본으로 NOT NULL ,UNIQUE 제약이 포함됨

FOREIGN KEY           외래키를 정의함 참조대상을 테이블이름으로 명시 무결성 위배시 처리방법으로 옵션지정가능 -NO ACTION/SET DEFAULT/SET NULL /CASCADE

UNIQUE                테이블내에서 열은 유일한 값을 가져야함/테이블내에서 동일한 값을 가져서는 안되는항목에 지정

NOT NULL              테이블 내에서 관련 열의 값은 NULL 일 수 없음 /필수 입력 항목에 대해 제약조건으로 설정

CHECK                 개발자가 정의하는 제약조건 /상황에 따라 다양한 조건 설정가능

3-1.제약조건활용

테이블 생성을 위한 CREATE 문에 제약 조건을 명시하는 형태로 사용되며 ALTER를 통해 테이블의 제약 조건을 변경할 수 있다.

3-2. SQL 활용 주요 내용
SQL은 DDL ,DML 및 DCL과 같은 유형의 작업을 통해 데이터베이스 안에 그릇을 만들고 그안에 데이터를 담거나 꺼내어 사용하는 도구다. 

4.DML활용
DML-데이터를 조작하는 명령어를 DML이라고 한다. 여기서 조작은 데이터 관점에서 생명 주기를 제어하는 것을 의미

4-1.DML유형

       구분         ㅣ  DML명령어  ㅣ 내용

   데이터 생성         INSERT         삽입 형태로 신규 데이터를 테이블에 저장

   데이터 조회         SELECT         테이블 내용을 조회

   데이터 변경         UPDATE         테이블의 내용을 변경

   데이터 삭제         DELETE         테이블의 내용을 삭제

4-2 .DML명령문
1.데이터 삽입

     형태          ㅣ         INSERT 명령문

        A              INSERT INTO table_name(column1,column2, ..) VALUES(VALUE1,VALUE2,...);
     
        B              INSERT INTO table_name VALUES(VALUE1,VALUE2, ...);

4-3. 데이터 조회(SELECT)

SELET[OPTION] COLUMNS FROM table[where절];

SELECT문 요소    ㅣ 요소값                  ㅣ 내용

OPTION             ALL/DISTINCT               중복포함한 조회 결과 출력/중복 제거한 조회결과 출력 

COLUMNS            컬럼명목록/와이드카드      SELECT통해 조회할 컬럼명 지정 /모두 또는 전체를 의미하는*

4-4.데이터 수정 

UPDATE table SET column1=value1, colum2=value2,...[where 절]

update 명령문은 보통 where 절을 통해 어떤 조건이 만족할 경우에만 특정 컬럼의 값을 수정하는 용도로 많이 사용된다.

4-5. 데이터 삭제 

DELETE FROM table [where 절];

조건절 없이 delete를 사용하는 경우 테이블 전체가 한 번에 삭제되는 위험이 있다.                

5.DCL 활용
DCL 유형
데이터베이스에서 데이터 이외의 오브젝트에 대해 조작할 필요가 있다. 이떄 사용하는 SQL명령을 DCL이라고 한다.

오브젝트           ㅣ       목적                    ㅣ            내용

사용자 권한               접근 통제                       사용자를 등록하고 ,사용자에게 특정 데이터베이스를 사용할 수 있는 권리를 부여하는 작업

트랜잭션                  안전한 거래 보장                동시에 다수의 작업을 독립적으로 안전하게 처리 하기 위한 상호 작용 단위

*트랜잭션 제어를 위한 명령어 TCL 이 있다. TCL과 DCL은 대상이 달라 서로 별개의 개념으로 분류허나,제어기능의 공통점으로 DCL의 일부로 분류하기도함


5-1. DCL 명령어

       유형            ㅣ        명령어                ㅣ             용도

       DCL                   GRANT/REVOKE                  데이터베이스 사용자 권한 부여/데이터베이스 사용자 권한회수

       TCL                COMMIT/ROLLBACK/CHECKPOINT       트랜잭션 확정 /트랜잭션 취소 /복귀지점 설정 
 
5-2.사용자 권한 부여

        권한          ㅣ       명령어 문법

     시스템권한          GRANT 권한1,권한2 TO 사용자 계정

     객체 권한           GRANT 권한1, 권한2 ON 객체명 TO 사용자 계정

       
    구분           ㅣ     권한                  ㅣ         내용

                      CREATE USER                   계정 생성 권한
                      
                      DROP USER                     계정 삭제 권한
                      
                      DROP ANY TABLE                테이블 삭제 권한
 
                      CREATE TABLE                  테이블 생성 권한
                       
   시스템 권한        CREATE SESSION                데이터베이스 접속 권한

                      CREATE VIEW                   뷰 생성 권한
 
                      CREATE SEQUENCE               시퀀스 생성 권한
                     
                      CREATE PROCEDURE              함수 생성 권한
-------------------------------------------------------------------------------
                      ALTER                         테이블 변경 권한
                      
                      INSERT
                      
                      DELETE
   객체 권한                                        데이터 조작 권한
                      SELECT
                      
                      UPDATE
                      
                      EXECUTE                       PROCEDURE 실행 권한
                                             


5-3. 사용자 권한 회수

GRANT에 대응하는 권한 회수 명령은 REVOKE이다.

        권한                 ㅣ         명령어 문법

      시스템권한                   REVOKE 권한1, 권한2 FROM 사용자 계정

      객체 권한                    REVOKE 권한1,권한2 ON 객체명 FROM 사용자계정

5-4.접근 통제 개념
데이터베이스의 보안을 구현하는 방법으로 접근 통제 방법을 사용한다.
보안 정책에 따라 접근 객체 (시스템 자원,통신자원 등 )에 대한 접근 주제(사용자,프로세스등)의
접근 권한 확인 및 이를 기반으로 한 접근 제어를 통해 자원에 대한 비인가된 사용을 방지하는 정보보호 기능

5-5.접근통제 정책에 따른 유형

임의 접근 통제 
-시스템 객체에 대한 접근을 사용자 개인 또는 그룹의 식별자를 기반으로 제한하는 방법
-여기서 임의적이라는 말은 어떤 종류의 접근권한을 갖는 사용자는 다른 사용자에게 자신의 판단에 의해 권한을주수있음
-주체와 객체의 신분 및 임의적 접근 통제 규칙에 기초하여 객체에 대한 주체의 접근을 통제하는 기능
*통제권한이 주체에 있음/주체가 임의적으로 접근 통제 권한을 배분하며 제어할 수 있음.

강제접근 통제
-정보시스템 내에서 어떤 주체가 특정 객체에 접근하려 할 떄 양쪽의 보안 레이블에 기초하여
높은 보안수준을 요구하는 정보가 낮은 보안 수준의 주체에게 노출 되지 않도록 접근을 제한하는 통제방법

*통제권한이 제3자에게 있음/주체는 접근 통제권한과 무관

5-6.접근통제와 DCL의관계

강제접근 통제의 경우, 제3자의 종류에 따라 보다 세분화된 정책이 존재한다. 접근 통제 정책의 두 가지 가운데 데이터베이스 관리시스템에서
채택한 접근 통제 정책은 임의접근 통제,DAC 방식이다.데이터베이스관리,특히 접근 통제용도로 SQL에서 사용하는 명령어가 바로 DCL인 것이다.

6.TCL 활용법

1.트랜잭션 개념
트랜잭션은 일처리 단위를 의미한다.

-트랜잭션은 논리적연산단위이다.

-한 개 이상의 데이터베이스 조작이다.

-즉 ,하나 이상의 SQL문장이 포함된다.

-트랜잭션은 거래 이다.

-이때 거래 결과가 모두 반영되거나 또는 모두 취소되어야 한다.

-즉 데이터베이스에서의 트랜잭션은 특별함,엄격한 거래를 의미한다.

-분할할 수 없는 최소단위이다.

6-1 트랜잭션 제어
트랜잭션을 제어한다는 것은 흐름의 구조를 바꾼다는 것이아니라 트랜잭션의 결과를 수용 취소하는것을 의미

         명령어       ㅣ         내용         ㅣ         비고

       COMMIT                거래내역확정         
 
       ROLLBACK              거래내역취소

       CHECKPOINT            저장점 설정            ROLLBACK할 위치를 지정함


7.데이터 사전

데이터 사전에는 데이터베이스의 데이터를 제외한 모든 정보가 있다.변경권한은 시스템이가지며 사용자는 읽기전용테이블로 단순조회만가능
데이터를 제외한 모든 정보라는 것은 데이터의 데이터를 의미 -메타데이터

7-1.데이터 사전 내용

-사용자정보(아이디,패스워드 및 권한등)

-데이터베이스 객체 정보(테이믈,뷰,인덱스 등)

-무결성 제약 정보

-함수,프로시저 및 트리거 등

데이터 사전 내용이 메타데이터라는 것은 모든 DBMS 제품에 공통 구현방법 ,관리법등 차이로 제품마다 다르다

7-2.데이터 사전용도 
사용자에게 데이터 사전은 단순 조회 대상일뿐이다

7-3. 오라클 데이터 사전영역

     영역             ㅣ  검색 범위                              ㅣ데이터 사전검색 쿼리문

    DBA_               데이터베이스의 모든객체 조회                   select *from DBA_TABLES/DBA_INDEXES/DBA_VIEWS
 
    ALL_               자신의 계정으로 접근 가능한 객체와    
                       타 계정의 접근 권한을 가진 모든 객체           select*from ALL_TABLES/INDEXES/VIEWS
 
    USER_              현재 자신의 계정이 소유한 객체 조회가능        select*from USER_TABLES/INDEXES/VIEWS
                       조회가능


